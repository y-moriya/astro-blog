---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import BlogPostPreview from '../components/BlogPostPreview.astro';
import MainLayout from '../layouts/MainLayout.astro';

// Use Astro.glob to fetch all post with associated frontmatter
const unsortedPosts = await Astro.glob('./posts/*.md');
const allPosts = unsortedPosts.sort(function (a, b) {
	return (
		new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf()
	);
});
const recentPosts = allPosts.slice(0,3);
---

<MainLayout title="Top | Stoicism" description="なんかしらの日記のようなものを綴るブログ">
{recentPosts.map(({ url, frontmatter }) => (
<BlogPostPreview
	title={frontmatter.title}
	description={frontmatter.description}
	publishDate={frontmatter.publishDate}
	url={url as string}
/>
))}
</MainLayout>