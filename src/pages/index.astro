---
import BlogPostPreview from '../components/BlogPostPreview.astro';
import MainLayout from '../layouts/MainLayout.astro';

// Use Astro.glob to fetch all post with associated frontmatter
const unsortedPosts = await Astro.glob('./posts/*.md');
const pinnedPosts = unsortedPosts.filter((p) => {
	return p.frontmatter.pinned;
}).sort(function (a, b) {
	return (
		new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf()
	);
});
---

<MainLayout title="Top | Stoicism" description="なんかしらの日記のようなものを綴るブログ">
	<h2>固定されている記事</h2>
	<hr>
{pinnedPosts.map(({ url, frontmatter }: any) => (
<BlogPostPreview
	title={frontmatter.title}
	tags={frontmatter.tags}
	publishDate={frontmatter.publishDate}
	url={url as string}
/>
))}
</MainLayout>