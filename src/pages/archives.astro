---
// Layout Import
import MainLayout from '../layouts/MainLayout.astro';
import dayjs from 'dayjs';

let title = 'All months'
let description = 'All the months used so far...'
// Data Fetching: List all Markdown posts in the repo.
const allPosts = await Astro.glob('./posts/*.md');
const months = [...new Set(allPosts.map(post => dayjs(post.frontmatter.publishDate).format('YYYY-MM')))];
---
<MainLayout title={ title } description={ description }>
    <h1 class="font-size-3">All Months</h1>
    <ul class="tag-list">
     {months.map((month) => (
        <li><a class="govuk-tag--blue" href={`/archives/${month}`} title={`View posts tagged under "${month}"`}>#{month}</a></li>
    ))}
    </ul>
  <!-- <p><i>page 1 of 1 (I don't have pagination yet 🤷🏻‍♂️)</i></p> -->
</MainLayout>

<style>
    .tag-list {
      display: flex;
      list-style-type: none;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    /*
    .tag {
      display: inline-block;
      border-radius: 9999px;
      --tw-bg-opacity: 1;
      background-color: rgba(216,180,254,var(--tw-bg-opacity));
      padding: 0.25rem 1rem;
      font-size: 1.25rem;
      line-height: 1.75rem;
      --tw-text-opacity: 1;
      color: rgba(126,34,206,var(--tw-text-opacity));
    }
    */
</style>